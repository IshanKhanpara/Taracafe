<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TaraCafe - Payment</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body class="bg-light">

<div class="container py-5 text-center">

    <h1 class="fw-bold">Payment Page</h1>
    <p class="text-muted">Complete your order payment below.</p>

    <div class="card p-4 mx-auto mt-4" style="max-width: 480px; border-radius: 15px;">
        <h3 id="itemName" class="fw-bold"></h3>
        <h4 class="text-success fw-bold">₹<span id="itemPrice"></span></h4>

        <button id="payBtn" class="btn btn-success mt-4 px-5 py-2">
            Pay Now
        </button>
    </div>

    <p id="statusMsg" class="mt-4 fw-bold"></p>

</div>


<script>
// Read item name & price from URL
const url = new URLSearchParams(window.location.search);
const item = url.get("item");
const price = url.get("price");

// Show values on payment page
document.getElementById("itemName").innerText = item;
document.getElementById("itemPrice").innerText = price;

// When user clicks Pay Now
document.getElementById("payBtn").onclick = function () {

    // Create order object
    let order = {
        id: "ORD" + Math.floor(Math.random() * 9000 + 1000),
        customer: "Online Customer",
        items: item + " x1",
        total: price,
        status: "Pending"
    };

    // Save to localStorage
    let orders = JSON.parse(localStorage.getItem("orders") || "[]");
    orders.push(order);
    localStorage.setItem("orders", JSON.stringify(orders));

    // Confirmation message
    document.getElementById("statusMsg").innerHTML =
        "<span class='text-success'>✔ Payment Successful! Order Placed.</span>";

    // Redirect to home after 1.5 sec
    setTimeout(() => {
    window.location.href = "orders.html";
}, 1500);
};
</script>

</body>
</html>
